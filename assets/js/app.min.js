ko.utils.stringStartsWith=function(a,e){return a=a||"",e.length>a.length?!1:a.substring(0,e.length)===e},ko.extenders.numeric=function(a,e){var n=ko.dependentObservable({read:function(){return a().toFixed(e)},write:a});return n.raw=a,n};var Campaign=function(a,e,n,t){self.name=a,self.description=e,self.department=n,self.donation=t},donationViewModel=function(a,e,n){var t=this;e.donation=ko.observable(0);for(var o=0;o<n.length;o++)n[o].donation=ko.observable(0);t.currencies=ko.observableArray(a);for(var o=0;o<a.length;o++)a[o].selected&&(selectedCurrency=ko.observable(t.currencies()[o]));t.totalDonation=ko.observable(0).extend({numeric:2}),t.general=ko.observable(e),t.campaigns=ko.observableArray(n),t.selectedCampaigns=ko.observableArray(),t.donatedCampaigns=ko.observableArray(),t.campaignSearch=ko.observable(""),t.showSearchResults=ko.observable(!0),t.showAllCampaigns=ko.observable(!1),t.filteredCampaigns=ko.computed(function(){return t.showSearchResults(!0),ko.utils.arrayFilter(n,function(a){return 0==t.campaignSearch().length||ko.utils.stringStartsWith(a.name.toLowerCase(),t.campaignSearch().toLowerCase())})}),t.selectCampaign=function(){t.campaignSearch(""),t.showSearchResults(!1),t.selectedCampaigns.unshift(this),t.campaigns.remove(this)},t.deselectCampaign=function(){t.campaigns.push(this),t.selectedCampaigns.remove(this),t.calculateTotal()},t.submitCampaignPayment=function(){t.campaigns.remove(this),t.selectedCampaigns.remove(this),t.donatedCampaigns.unshift({name:this.name,description:this.description,donation:this.donation()}),t.calculateTotal()},t.addToGeneralFund=function(){var a=$("#general-fund-value").val();t.general().donation(+a),$("#general-fund-value").val(""),t.calculateTotal()},t.toggleCampaignList=function(){t.showAllCampaigns(!t.showAllCampaigns())},t.removeDonation=function(){t.campaigns.unshift(this),t.donatedCampaigns.remove(this),t.calculateTotal()},t.removeGeneralDonation=function(){t.general().donation(""),t.calculateTotal()},t.calculateTotal=function(){for(var a=t.donatedCampaigns(),e=0,n=0;n<a.length;n++)e+=+a[n].donation;t.totalDonation(e+ +t.general().donation());var o=$("#main-form");o.find("input[name=currency]").val(selectedCurrency().name),o.find("input[name=total]").val(+t.general().donation()+e),o.find("input[name=totalGeneral]").val(+t.general().donation()),o.find("input[name=totalCampaigns]").val(e)},t.makePayment=function(){$("#main-form").submit()}};ko.applyBindings(new donationViewModel(window.donation.currencies,window.donation.campaignsGeneral,window.donation.campaignsAll));
//# sourceMappingURL=./app.min.js.map