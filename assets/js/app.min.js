ko.utils.stringStartsWith=function(a,e){return a=a||"",e.length>a.length?!1:a.substring(0,e.length)===e},ko.extenders.numeric=function(a,e){var n=ko.dependentObservable({read:function(){return a().toFixed(e)},write:a});return n.raw=a,n};var Campaign=function(a,e,n,o){self.name=a,self.description=e,self.department=n,self.donation=o},donationViewModel=function(a,e,n){var o=this;e.donation=ko.observable(0);for(var t=0;t<n.length;t++)n[t].donation=ko.observable(0);o.currencies=ko.observableArray(a);for(var t=0;t<a.length;t++)a[t].selected&&(selectedCurrency=ko.observable(o.currencies()[t]));o.totalDonation=ko.observable(0).extend({numeric:2}),o.general=ko.observable(e),o.campaigns=ko.observableArray(n),o.selectedCampaigns=ko.observableArray(),o.donatedCampaigns=ko.observableArray(),o.campaignSearch=ko.observable(""),o.showSearchResults=ko.observable(!0),o.showAllCampaigns=ko.observable(!1),o.filteredCampaigns=ko.computed(function(){return o.showSearchResults(!0),ko.utils.arrayFilter(n,function(a){return 0==o.campaignSearch().length||ko.utils.stringStartsWith(a.name.toLowerCase(),o.campaignSearch().toLowerCase())})}),o.selectCampaign=function(){o.campaignSearch(""),o.showSearchResults(!1),o.selectedCampaigns.unshift(this),o.campaigns.remove(this)},o.deselectCampaign=function(){o.campaigns.push(this),o.selectedCampaigns.remove(this),o.calculateTotal()},o.submitCampaignPayment=function(){o.campaigns.remove(this),o.selectedCampaigns.remove(this),o.donatedCampaigns.unshift({name:this.name,description:this.description,donation:this.donation()}),o.calculateTotal()},o.addToGeneralFund=function(){var a=$("#general-fund-value").val();o.general().donation(+a),$("#general-fund-value").val(""),o.calculateTotal()},o.toggleCampaignList=function(){o.showAllCampaigns(!o.showAllCampaigns())},o.removeDonation=function(){o.campaigns.unshift(this),o.donatedCampaigns.remove(this),o.calculateTotal()},o.removeGeneralDonation=function(){o.general().donation(""),o.calculateTotal()},o.calculateTotal=function(){for(var a=o.donatedCampaigns(),e=0,n=0;n<a.length;n++)e+=+a[n].donation;o.totalDonation(e+ +o.general().donation());var t=$("#main-form");t.find("input[name=currency]").val(selectedCurrency().name),t.find("input[name=total]").val(+o.general().donation()+e),t.find("input[name=totalGeneral]").val(+o.general().donation()),t.find("input[name=totalCampaigns]").val(e)},o.makePayment=function(){$("#main-form").submit()},$("#main-panel").removeClass("loading")};ko.applyBindings(new donationViewModel(window.donation.currencies,window.donation.campaignsGeneral,window.donation.campaignsAll));
//# sourceMappingURL=./app.min.js.map