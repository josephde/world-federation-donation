ko.utils.stringStartsWith=function(e,a){return e=e||"",a.length>e.length?!1:e.substring(0,a.length)===a},ko.extenders.numeric=function(e,a){var n=ko.dependentObservable({read:function(){return e().toFixed(a)},write:e});return n.raw=e,n};var Campaign=function(e,a,n,t){self.name=e,self.description=a,self.department=n,self.donation=t},donationViewModel=function(e,a){var n=this;n.currencies=ko.observableArray([{name:"GBP",symbol:"£"},{name:"EUR",symbol:"€"},{name:"USD",symbol:"$"}]),selectedCurrency=ko.observable(),n.totalDonation=ko.observable(0).extend({numeric:2}),n.general=ko.observable(e),n.campaigns=ko.observableArray(a),n.selectedCampaigns=ko.observableArray(),n.donatedCampaigns=ko.observableArray(),n.campaignSearch=ko.observable(""),n.showSearchResults=ko.observable(!0),n.showAllCampaigns=ko.observable(!1),n.filteredCampaigns=ko.computed(function(){return n.showSearchResults(!0),ko.utils.arrayFilter(a,function(e){return 0==n.campaignSearch().length||ko.utils.stringStartsWith(e.name.toLowerCase(),n.campaignSearch().toLowerCase())})}),n.selectCampaign=function(){n.campaignSearch(""),n.showSearchResults(!1),n.selectedCampaigns.unshift(this),n.campaigns.remove(this)},n.deselectCampaign=function(){n.campaigns.push(this),n.selectedCampaigns.remove(this),n.calculateTotal()},n.submitCampaignPayment=function(){n.campaigns.remove(this),n.selectedCampaigns.remove(this),n.donatedCampaigns.unshift({name:this.name,description:this.description,donation:this.donation()}),n.calculateTotal()},n.addToGeneralFund=function(){var e=$("#general-fund-value").val();n.general().donation(+e),$("#general-fund-value").val(""),n.calculateTotal()},n.toggleCampaignList=function(){n.showAllCampaigns(!n.showAllCampaigns())},n.removeDonation=function(){n.campaigns.unshift(this),n.donatedCampaigns.remove(this),n.calculateTotal()},n.removeGeneralDonation=function(){n.general().donation(""),n.calculateTotal()},n.calculateTotal=function(){for(var e=n.donatedCampaigns(),a=0,t=0;t<e.length;t++)a+=+e[t].donation;a+=+n.general().donation(),n.totalDonation(a)}},generalCampaignData={name:"General",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",department:"Donation",donation:ko.observable(0)},campaignsData=[{name:"Abacus",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",department:"Donation",donation:ko.observable("")},{name:"Biscuit",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",department:"Donation",donation:ko.observable("")},{name:"Crumpet",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",department:"Donation",donation:ko.observable("")},{name:"Yemen Appeal",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non pharetra ligula, eu rutrum mi.",department:"Health",donation:ko.observable("")},{name:"Third one",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non pharetra ligula, eu rutrum mi.",department:"Health",donation:ko.observable("")},{name:"Water fund",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non pharetra ligula, eu rutrum mi.",department:"Health",donation:ko.observable("")},{name:"Tableegh",description:"https://www.world-federation.org/content/tableegh",department:"Donation",donation:ko.observable("")},{name:"Darjeeling",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",department:"Donation",donation:ko.observable("")}];ko.applyBindings(new donationViewModel(generalCampaignData,campaignsData));